<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Notes.Views.SettingsPage"
             Title="Settings" 
             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundColorLight}, 
                                               Dark={StaticResource BackgroundColorDark}}">
    
    <ContentPage.Resources>
        <ControlTemplate x:Key="RadioButtonTemplate">
            <Frame BorderColor="{StaticResource BorderColorLight}"
                   BackgroundColor=" Transparent"
                   HasShadow="False"
                   HeightRequest="85"
                   WidthRequest="100"
                   HorizontalOptions="Start"
                   VerticalOptions="Start"
                   Padding="0">
                <VisualStateManager.VisualStateGroups>

                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CheckedStates">

                            <VisualState x:Name="Checked">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor"
                                            Value="PapayaWhip" />
                                    <Setter Property="BorderColor"
                                            Value="Red" />
                                    <Setter TargetName="check"
                                            Property="Opacity"
                                            Value="1" />
                                </VisualState.Setters>
                            </VisualState>

                            <VisualState x:Name="Unchecked">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor"
                                            Value="PapayaWhip" />
                                    <Setter Property="BorderColor"
                                            Value="{StaticResource BorderColorLight}"/>
                                    <Setter TargetName="check"
                                            Property="Opacity"
                                            Value="0" />
                                </VisualState.Setters>
                            </VisualState>

                        </VisualStateGroup>
                    </VisualStateGroupList>
                </VisualStateManager.VisualStateGroups>

                <Grid Margin="4"
                      WidthRequest="100">
                    <Grid WidthRequest="18"
                          HeightRequest="18"
                          HorizontalOptions="End"
                          VerticalOptions="Start">
                        <Ellipse Stroke="Blue"
                                 Fill="White"
                                 WidthRequest="16"
                                 HeightRequest="16"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center" />
                        <Ellipse x:Name="check"
                                 Fill="Blue"
                                 WidthRequest="8"
                                 HeightRequest="8"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center"/>
                    </Grid>

                    <ContentPresenter/>
                </Grid>
            </Frame>
        </ControlTemplate>

        <Style TargetType="RadioButton">
            <Setter Property="ControlTemplate"
                    Value="{DynamicResource RadioButtonTemplate}" />
        </Style>

    </ContentPage.Resources>
    
    <ContentPage.Content>
        <StackLayout>
            <Label Text="Set theme:" FontSize="22" Margin="50, 15, 5, 0"
                   TextColor="{AppThemeBinding Dark=White, Light=Black}"/>
            
            <Frame BackgroundColor="{DynamicResource FrameColor}" BorderColor="DodgerBlue" CornerRadius="25" 
                   Margin="45, 5, 45, 0" HeightRequest="120">

                <Grid VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.3*"/>
                        <ColumnDefinition Width="0.3*"/>
                        <ColumnDefinition Width="0.3*"/>
                    </Grid.ColumnDefinitions>
                    
                    <RadioButton x:Name="RadioButtonSystem" Value="System" Margin="5, 0, 0, 5"
                                 Grid.Column="0" CheckedChanged="RadioButtonSystem_CheckedChanged">
                        <RadioButton.Content>
                            <StackLayout Orientation="Vertical">
                                <Image Source="system.png" HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Label Text="System" FontSize="14" TextColor="Black" VerticalOptions="Center"
                                       HorizontalOptions="CenterAndExpand"/>
                            </StackLayout>
                        </RadioButton.Content>
                    </RadioButton>

                    <RadioButton x:Name="RadioButtonLight" Value="Light" Margin="5, 0, 0, 5"
                                 Grid.Column="1" CheckedChanged="RadioButtonSystem_CheckedChanged">
                        <RadioButton.Content>
                            <StackLayout Orientation="Vertical">
                                <Image Source="light.png" HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Label Text="Light mode" FontSize="14" TextColor="Black" VerticalOptions="Center" 
                                       HorizontalOptions="CenterAndExpand"/>
                            </StackLayout>
                        </RadioButton.Content>
                    </RadioButton>

                    <RadioButton x:Name="RadioButtonDark" Value="Dark" Margin="5, 0, 0, 5"
                                 Grid.Column="2" CheckedChanged="RadioButtonSystem_CheckedChanged">
                        <RadioButton.Content>
                            <StackLayout Orientation="Vertical">
                                <Image Source="dark.png" HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Label Text="Dark mode" FontSize="14" TextColor="Black" VerticalOptions="Center" 
                                       HorizontalOptions="CenterAndExpand"/>
                            </StackLayout>
                        </RadioButton.Content>
                    </RadioButton>

                </Grid>
            </Frame>

            <Button CornerRadius="25" BorderColor="DodgerBlue" Text="Change color" TextColor="DodgerBlue" BackgroundColor="Transparent"
                    Clicked="Button_Clicked" Margin="10" BorderWidth="2"/>
        </StackLayout>
    </ContentPage.Content>
</ContentPage>